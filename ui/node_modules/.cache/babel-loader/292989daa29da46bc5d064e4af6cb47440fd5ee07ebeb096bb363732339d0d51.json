{"ast":null,"code":"import React,{useState,useEffect}from'react';import{useApi}from'../../context/ApiContext';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const Header=_ref=>{let{onSidebarToggle,darkMode,onDarkModeToggle}=_ref;const{getStatus}=useApi();const[status,setStatus]=useState(null);const[loading,setLoading]=useState(false);useEffect(()=>{const fetchStatus=async()=>{try{setLoading(true);const data=await getStatus();setStatus(data);}catch(error){console.error('Failed to fetch status:',error);}finally{setLoading(false);}};fetchStatus();const interval=setInterval(fetchStatus,30000);// Refresh every 30 seconds\nreturn()=>clearInterval(interval);},[getStatus]);return/*#__PURE__*/_jsx(\"header\",{className:\"bg-white dark:bg-gray-800 border-b border-gray-200 dark:border-gray-700\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center justify-between h-16 px-6\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:onSidebarToggle,className:\"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 lg:hidden\",children:/*#__PURE__*/_jsx(\"svg\",{className:\"w-6 h-6\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M4 6h16M4 12h16M4 18h16\"})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-2 h-2 rounded-full \".concat(loading?'bg-yellow-400 animate-pulse':'bg-green-400')}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:(status===null||status===void 0?void 0:status.mode)==='dry-run'?'Dry Run':'Production'})]}),status&&/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4 text-sm text-gray-600 dark:text-gray-300\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Circuit Breaker:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium \".concat(status.circuit_breaker_state==='CLOSED'?'text-green-600':'text-red-600'),children:status.circuit_breaker_state})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-1\",children:[/*#__PURE__*/_jsx(\"span\",{children:\"Tenants:\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-medium\",children:status.monitored_tenants||0})]})]})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-4\",children:[status&&/*#__PURE__*/_jsxs(\"div\",{className:\"text-sm text-gray-600 dark:text-gray-300\",children:[\"Last reconcile: \",new Date(status.last_reconcile).toLocaleTimeString()]}),/*#__PURE__*/_jsx(\"button\",{onClick:onDarkModeToggle,className:\"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 transition-colors\",title:darkMode?'Switch to light mode':'Switch to dark mode',children:darkMode?/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-yellow-500\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{fillRule:\"evenodd\",d:\"M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z\",clipRule:\"evenodd\"})}):/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5 text-gray-400\",fill:\"currentColor\",viewBox:\"0 0 20 20\",children:/*#__PURE__*/_jsx(\"path\",{d:\"M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z\"})})}),/*#__PURE__*/_jsxs(\"button\",{className:\"p-2 rounded-md hover:bg-gray-100 dark:hover:bg-gray-700 relative\",children:[/*#__PURE__*/_jsx(\"svg\",{className:\"w-5 h-5\",fill:\"none\",stroke:\"currentColor\",viewBox:\"0 0 24 24\",children:/*#__PURE__*/_jsx(\"path\",{strokeLinecap:\"round\",strokeLinejoin:\"round\",strokeWidth:2,d:\"M15 17h5l-5-5V9a7 7 0 10-14 0v3l-5 5h5m9 0v1a3 3 0 01-6 0v-1m6 0H9\"})}),(status===null||status===void 0?void 0:status.panic_mode_active)&&/*#__PURE__*/_jsx(\"span\",{className:\"absolute -top-1 -right-1 w-3 h-3 bg-red-500 rounded-full animate-pulse\"})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"w-8 h-8 bg-primary-500 rounded-full flex items-center justify-center\",children:/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-white\",children:\"OP\"})}),/*#__PURE__*/_jsx(\"span\",{className:\"text-sm font-medium text-gray-700 dark:text-gray-200\",children:\"Operator\"})]})]})]})});};export default Header;","map":null,"metadata":{},"sourceType":"module","externalDependencies":[]}